!function(t){var e={init:function(e){return this.each(function(){var a=t(this),i=a.data("monthpicker"),n=e&&e.year?e.year:(new Date).getFullYear(),s=t.extend({pattern:"mm/yyyy",selectedMonth:null,selectedMonthName:"",selectedYear:n,startYear:n-10,finalYear:n+10,monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],id:"monthpicker_"+(Math.random()*Math.random()).toString().replace(".",""),openOnFocus:!0,disabledMonths:[]},e);s.dateSeparator=s.pattern.replace(/(mmm|mm|m|yyyy|yy|y)/gi,""),i||(t(this).data("monthpicker",{target:a,settings:s}),s.openOnFocus===!0&&a.on("focus",function(){a.monthpicker("show")}),a.monthpicker("parseInputValue",s),a.monthpicker("mountWidget",s),a.on("monthpicker-click-month",function(t,e,i){a.monthpicker("setValue",s),a.monthpicker("hide")}),a.addClass("mtz-monthpicker-widgetcontainer"),t(document).unbind("mousedown.mtzmonthpicker").on("mousedown.mtzmonthpicker",function(e){(!e.target.className||e.target.className.toString().indexOf("mtz-monthpicker")<0)&&t(this).monthpicker("hideAll")}))})},show:function(){t(this).monthpicker("hideAll");var e=t("#"+this.data("monthpicker").settings.id);e.css("top",this.offset().top+this.outerHeight()),t(window).width()>e.width()+this.offset().left?e.css("left",this.offset().left):e.css("left",this.offset().left-e.width()),e.show(),e.find("select").focus(),this.trigger("monthpicker-show")},hide:function(){var e=t("#"+this.data("monthpicker").settings.id);e.is(":visible")&&(e.hide(),this.trigger("monthpicker-hide"))},hideAll:function(){t(".mtz-monthpicker-widgetcontainer").each(function(){"undefined"!=typeof t(this).data("monthpicker")&&t(this).monthpicker("hide")})},setValue:function(t){var e=t.selectedMonth,a=t.selectedYear;t.pattern.indexOf("mmm")>=0?e=t.selectedMonthName:t.pattern.indexOf("mm")>=0&&t.selectedMonth<10&&(e="0"+t.selectedMonth),t.pattern.indexOf("yyyy")<0&&(a=a.toString().substr(2,2)),t.pattern.indexOf("y")>t.pattern.indexOf(t.dateSeparator)?this.val(e+t.dateSeparator+a):this.val(a+t.dateSeparator+e),this.change()},disableMonths:function(e){var a=this.data("monthpicker").settings,i=t("#"+a.id);a.disabledMonths=e,i.find(".mtz-monthpicker-month").each(function(){var a=parseInt(t(this).data("month"));t.inArray(a,e)>=0?t(this).addClass("ui-state-disabled"):t(this).removeClass("ui-state-disabled")})},mountWidget:function(e){var a=this,i=t('<div id="'+e.id+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" />'),n=t('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all mtz-monthpicker" />'),s=t('<select class="mtz-monthpicker mtz-monthpicker-year" />'),r=t('<table class="mtz-monthpicker" />'),o=t('<tbody class="mtz-monthpicker" />'),c=t('<tr class="mtz-monthpicker" />'),d="",h=(e.selectedYear,null),l=t(this).data("selected-year"),p=t(this).data("start-year"),m=t(this).data("final-year");l&&(e.selectedYear=l),p&&(e.startYear=p),m&&(e.finalYear=m),i.css({position:"absolute",zIndex:999999,whiteSpace:"nowrap",width:"250px",overflow:"hidden",textAlign:"center",display:"none",top:a.offset().top+a.outerHeight(),left:a.offset().left}),s.on("change",function(){var i=t(this).parent().parent().find("td[data-month]");i.removeClass("ui-state-active"),t(this).val()==e.selectedYear&&i.filter("td[data-month="+e.selectedMonth+"]").addClass("ui-state-active"),a.trigger("monthpicker-change-year",t(this).val())});for(var u=e.startYear;u<=e.finalYear;u++){var h=t('<option class="mtz-monthpicker" />').attr("value",u).append(u);e.selectedYear==u&&h.attr("selected","selected"),s.append(h)}n.append(s).appendTo(i);for(var u=1;u<=12;u++)d=t('<td class="ui-state-default mtz-monthpicker mtz-monthpicker-month" style="padding:5px;cursor:default;" />').attr("data-month",u),e.selectedMonth==u&&d.addClass("ui-state-active"),d.append(e.monthNames[u-1]),c.append(d).appendTo(o),u%3===0&&(c=t('<tr class="mtz-monthpicker" />'));o.find(".mtz-monthpicker-month").on("click",function(){var i=parseInt(t(this).data("month"));t.inArray(i,e.disabledMonths)<0&&(e.selectedYear=t(this).closest(".ui-datepicker").find(".mtz-monthpicker-year").first().val(),e.selectedMonth=t(this).data("month"),e.selectedMonthName=t(this).text(),a.trigger("monthpicker-click-month",t(this).data("month")),t(this).closest("table").find(".ui-state-active").removeClass("ui-state-active"),t(this).addClass("ui-state-active"))}),r.append(o).appendTo(i),i.appendTo("body")},destroy:function(){return this.each(function(){t(this).removeClass("mtz-monthpicker-widgetcontainer").unbind("focus").removeData("monthpicker")})},getDate:function(){var t=this.data("monthpicker").settings;return t.selectedMonth&&t.selectedYear?new Date(t.selectedYear,t.selectedMonth-1):null},parseInputValue:function(t){if(this.val()&&t.dateSeparator){var e=this.val().toString().split(t.dateSeparator);0===t.pattern.indexOf("m")?(t.selectedMonth=e[0],t.selectedYear=e[1]):(t.selectedMonth=e[1],t.selectedYear=e[0])}}};t.fn.monthpicker=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on jQuery.mtz.monthpicker"):e.init.apply(this,arguments)}}(jQuery);